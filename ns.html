<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quote-Ns</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      background-color: #f5f5f5;
      margin: 0;
      padding:0;
    }

    .quote-box {
      background-color: #d3d3d3;
      padding: 20px 5px;
      margin: 10px;
      border-radius: 8px;
      width: 80%;
      max-width: 1000px;
      font-weight: bold;
      color: #333;
      text-align: center;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
      white-space: pre-wrap; /* Preserve new lines */
      word-wrap: break-word; /* Ensure long words break correctly */
    }

    .buttons {
      margin: 0px;
    }

    .button {
      padding: 10px 10px;
      margin: 0px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 10px;
      border: none;
      color: white;
      background-color: #007BFF;
    }

    .copy-button {
      background-color: #28a745; /* Green color for copy button */
      color: white;
      margin-top: 0px;position:absolute;right:0px;
    }
  </style>
</head>
<body>



<textarea id="newQuoteInput" placeholder="Enter a new quote" style="display:none;padding: 10px; height: 100px; font-size: 16px; width: 80%; max-width: 600px; margin-top: 10px;"></textarea>
<div class="buttons">
  <button id="add" class="button" onclick="addp();" style="position:fixed;top:120px;left:-20px;padding: 20px">[+]</button>
  <button id="shuffleButton" class="button"style="display:none;fixed;top:2px;">Shuffle Quotes</button>
  <button id="addQuoteButton" class="button"style="display:none;display:fixed;top:2px;">Add Quote</button>
</div><div id="quotesContainer"></div>

<script>
  const API_URL = 'https://script.google.com/macros/s/AKfycbyrCGtDPOCHmFjY1WmjdB0gjL8gcWlvzYHHBySGVEzta4tMYpDa0BusT5OSftfzuEJb/exec'; // Replace with your API URL from Step 3

  // Fetch quotes from Google Sheets
  async function loadQuotes() {
    const response = await fetch(API_URL);
    const quotes = await response.json();
    document.getElementById('quotesContainer').innerHTML = '';
    quotes.forEach(displayQuote);
  }

  // Display a single quote on the page
  function displayQuote(quoteText) {
    const quoteDiv = document.createElement("div");
    quoteDiv.className = "quote-box";
    quoteDiv.textContent = `"${quoteText}"`; // Display the quote
    
    // Create the Copy to Clipboard button
    const copyButton = document.createElement("button");
    copyButton.className = "button copy-button";
    copyButton.textContent = "Copy";
    
    // Event listener for Copy button
    copyButton.addEventListener("click", () => copyToClipboard(quoteText));

    // Append the quote and button
    quoteDiv.appendChild(copyButton);
    document.getElementById("quotesContainer").appendChild(quoteDiv);
  }

 // Function to copy quote to clipboard
function copyToClipboard(text) {
  const textArea = document.createElement("textarea");
  textArea.value = text;
  document.body.appendChild(textArea);
  textArea.select();
  document.execCommand("copy");
  document.body.removeChild(textArea);

  // Change the color of the copy button when clicked
  const button = event.target;
  button.style.backgroundColor = "#007BFF"; // Change to green color on success
  button.textContent = "Copied!"; // Change text to "Copied!"

  // Reset the button color and text after 2 seconds
  setTimeout(() => {
    button.style.backgroundColor = "#28a745"; // Original color
    button.textContent = "Copy"; // Original text
  }, 2000);
}


  // Shuffle the quotes
  function shuffleQuotes() {
    const container = document.getElementById("quotesContainer");
    const quotes = Array.from(container.children);
    quotes.sort(() => Math.random() - 0.5);
    container.innerHTML = "";
    quotes.forEach(quote => container.appendChild(quote));
  }

  // Add a new quote
  async function addQuote() {
    const newQuoteInput = document.getElementById("newQuoteInput");
    const newQuoteText = newQuoteInput.value.trim();
    if (newQuoteText) {
      displayQuote(newQuoteText); // Show the new quote on the page
      await saveQuote(newQuoteText); // Save it to Google Sheets
      newQuoteInput.value = ""; // Clear input field
    } else {
      alert("Please enter a quote before adding.");
    }
  }

  // Save a quote to Google Sheets
  async function saveQuote(quoteText) {
    await fetch(API_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      body: `quote=${encodeURIComponent(quoteText)}`
    });
  }

  // Event listeners for buttons
  document.getElementById("shuffleButton").addEventListener("click", shuffleQuotes);
  document.getElementById("addQuoteButton").addEventListener("click", addQuote);

  // Load and display quotes on page load
  loadQuotes();
  
function addp() {
  const addQuoteButton = document.getElementById("addQuoteButton");
  const input = document.getElementById("newQuoteInput");
  const add = document.getElementById("add");

  // Toggle visibility and button text
  if (input.style.display === "none") {
    add.innerHTML = '[X]';  // Change the button text to [X]
    input.style.display = "block";  // Show the input field
    addQuoteButton.style.display = "block";  // Show the cancel button
    
    // Scroll to the top of the page or input field
    window.scrollTo({ top: 0, behavior: "smooth" });  // Scroll smoothly to the top
  } else {
    add.innerHTML = '[+]';  // Change the button text back to [+]
    input.style.display = "none";  // Hide the input field
    addQuoteButton.style.display = "none";  // Hide the cancel button
  }
}


</script>

</body>
</html>
