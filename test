// Function to start the polling for new messages every 10 seconds
function startMessageChecker() {
  // Set an interval to call fetchAndCheckMessages every 10 seconds (10000 milliseconds)
  setInterval(fetchAndCheckMessages, 10000); // 10 seconds interval
}

// Function to fetch messages and check if "kiss" is mentioned
async function fetchAndCheckMessages() {
  try {
    // Fetch the latest messages directly from the server
    const response = await fetch('https://script.google.com/macros/s/AKfycbxnjJn8OursihvYZNl4ljKu75Zr8edu93pKcfwNtz2J0BAk35JSrfz8hmLoa0fNEMhBVA/exec');
    const messages = await response.json();

    // Check each message for the word "kiss"
    messages.forEach(message => {
      if (message.text.includes("kiss")) {
        playSound(); // Play sound if "kiss" is found
      }
    });
  } catch (error) {
    console.error('Error fetching messages:', error);
  }
}

// Function to play sound when "kiss" is detected
function playSound() {
  const sound = new Audio('https://nishandangi.github.io/a/confirmation.wav');
  sound.play();
}

// Start polling as soon as the page loads
startMessageChecker();
